# iterative_proto
Generates [protocol handler](qtb_analyze.md#arg-fun_proto) for iterative protocols. The measurements are grouped by iterations. The measurements at each iteration are described by user function handler.

[**&#8592; Back to contents**](README.md)

## Usage
* `fun_proto = iterative_proto(fun_measset)` generates protocol handler for iterative protocol where the set of measurements ar every iteration is generated by calling [fun_measset](#arg-fun_measset")
* `fun_proto = iterative_proto(fun_measset,param1,param2,...)` specifies parameters that are translated to [fun_measset](#arg-fun_measset") call as additional arguments

## <a name="args">Input arguments</a>

### <a name="arg-fun_measset">fun_measset</a>
_**Data type:**_ function_handle

At every iterative step the `fun_measset` is called with the following arguments:
* `iter` - iteration number
* `jn` - the number of samples being measured so far,
* `ntot` - total sample size,
* `meas` - [measurement array](qtb_analyze.md#meas-arr) of the previous measurements,
* `data` - [data array](qtb_analyze.md#data-arr) of the previous measurement results,
* `dim` - [dimension array](qtb_analyze.md#dim-arr).

The output of the `fun_measset` call should be a cell array in the form of [measurement array](qtb_analyze.md#meas-arr).

_**Example:**_ `fun_measset = @povm_measset_handler`
```matlab
function measset = povm_measset_handler(iter,jn,ntot,meas,data,dim)
  % process inputs
  measset{1}.povm = ...
  measset{1}.nshots = ...
  measset{2}.povm = ...
  measset{2}.nshots = ...
  ...
end
```

One may specify additional parameters at the `iterative_proto` input. These parameters are translated to `fun_measset` as additional arguments.

_**Example:**_ `fun_proto = iterative_proto(@povm_measset_handler,param1,param2)`
```matlab
function measset = povm_measset_handler(iter,jn,ntot,meas,data,dim,param1,param2)
  % process inputs
  measset{1}.povm = ...
  measset{1}.nshots = ...
  measset{2}.povm = ...
  measset{2}.nshots = ...
  ...
end
```

## <a name="output">Function output</a>
_**Data type:**_ function_handle

[Protocol handler](qtb_analyze.md#arg-fun_proto).
